{% extends 'rate_my_walk/base.html' %}
{% load staticfiles %}

{% block title_block %}
    {{ walk.name }}
{% endblock %}

{% block body_block %}

<script src="https://unpkg.com/feather-icons"></script>

<link href="https://getbootstrap.com/docs/4.2/examples/product/product.css" rel="stylesheet">
<link rel="stylesheet" href="{% static 'rate_my_walk/RMWWalkcss.css' %}" />
<div class = "jumbotron p-4">
        <div class="container">
            <h1 class="jumbotron-heading">{{ walk.name }}</h1>
        </div>
</div>

<main class="container">
  <div class="row">
    <div class="col-md-8">

      <article class="blog-post">
        <h3>Description</h3>
        <p>{{ walk.desc }}</p>
        <br />
        <ul class="list-unstyled">
          <li><span data-feather="play"></span>Start walk on {{ walk.start }}</li>
          <li><span data-feather="stop-circle"></span>End walk on {{ walk.end }}</li>
        </ul>

      </article><!-- /.blog-post end of desc -->

      <article class="blog-post">
        <h3>Ratings</h3>
        <div class="row">

            <div class="row-md-6">
            <ul class="list-unstyled">
                <li><span data-feather="star"></span>Difficulty: </li>
                <li><span data-feather="star"></span>Duration: </li>
                <li><span data-feather="star"></span>How Enoyable: </li>
            </ul>
            </div>
            
            <div class="row-md-2">
            <ul class="list-unstyled">
                <li class="alignedRating">{{ walk.difficulty }}</li>
                <li class="alignedRating">{{ walk.duration }}</li>
                <li class="alignedRating">{{ walk.enjoyment }}</li>
            </ul>
            </div>
        </div>
        
      </article><!-- /.blog-post -->

    </div>

    <div class="col-md-4">
        <div>
            <p class="mb-0">Image</p>
            {{ walk.cover }}
        </div>

        <div class="py-1 mb-2 bg-dark rounded">
            <nav class="nav d-flex justify-content-center">
                <a class="p-2 link-secondary" href="{% url 'rate_my_walk:more_images' walk.slug %}"><p class="navbarText">More Images</p></a>
            </nav>
        </div>

        <div class="py-1 mb-2 bg-dark rounded">
            <nav class="nav d-flex justify-content-center">
            {% if user.is_authenticated %}
                <a class="p-2 link-secondary" href="{% url 'rate_my_walk:rateWalk' walk.slug %}"><p class="navbarText">Rate Walk Yourself</p></a>
            {% else %}
                 <a class="p-2 link-secondary" id="unauthenticated-user-rating">
                    <p class="navbarText">Rate Walk Yourself</p>
                </a>
            {% endif %}
            </nav>
        </div>
		
        <div class="py-1 mb-2 bg-dark rounded">
            <nav class="nav d-flex justify-content-center">
			{% if user.is_authenticated %}
                <a class="p-2 link-secondary" href="{% url 'rate_my_walk:edit_walk' walk.slug %}"><p class="navbarText">Edit Walk</p></a>
            {% endif %}
            </nav>
        </div>


		
    </div>

  </div><!-- /.row -->
  
  
  
      <article class="blog-post">
        <h3>User Ratings</h3>
        <div class="row">
			{% if difficulty %}
				<div class="row-md-6">
				<ul class="list-unstyled">
					<li><span data-feather="star"></span>Difficulty: </li>
					<li><span data-feather="star"></span>Duration: </li>
					<li><span data-feather="star"></span>How Enoyable: </li>
				</ul>
				</div>
				
				<div class="row-md-2">
				<ul class="list-unstyled">
					<li class="alignedRating">{{ difficulty }}</li>
					<li class="alignedRating">{{ duration }}</li>
					<li class="alignedRating">{{ enjoyment }}</li>
				</ul>
				</div>
			{% else %}
				<span data-feather="star"></span>No one rated this walk yet.
			{% endif %}
        </div>
        
      </article><!-- /.blog-post -->

  
  
  <div><!-- all previous comments -->
	<h3>Comments on this walk</h3>
	{% if comments %}
		<ul>
			{% for comment in comments %}
				<li>
					{{comment.owner}} <br />
					{{comment.date}} <br />
					{{comment.title}} <br />
					{{comment.comment}}
				</li>
			{% endfor %}
		</ul>
	{% else %}
		<strong>No comments on this walk yet.</strong>
	{% endif %}
  </div><!-- /all previous comments -->


  <div><!-- add new comment -->
    <div>
		<h3>Add your own comment</h3>
            <form id="comment_form" method="post" action="{% url 'rate_my_walk:showWalk' walk.slug %}", enctype="multipart/form-data">
            {% csrf_token %}
            {% for hidden in comment_form.hidden_fields %}
                {{ hidden }}
            {% endfor %}
            {% for field in comment_form.visible_fields %}
                {{ field.errors }}
                {{ field.help_text }}<br />
                {{ field }}<br />
                <div class="p-2"></div>
            {% endfor %}
                <br />
                <button class="btn btn-primary" type="submit" name="submit">
                    Upload Comment
                </button>
                <div class="p-5"></div>
        </form>
    </div>
  </div><!-- /add new comment -->
  
  
  <div><!-- add new photo for more images -->
    <div>
		<h3>Add your photo</h3>
            <form id="photo_form" method="post" action="{% url 'rate_my_walk:showWalk' walk.slug %}", enctype="multipart/form-data">
            {% csrf_token %}
            {% for hidden in photo_form.hidden_fields %}
                {{ hidden }}
            {% endfor %}
            {% for field in photo_form.visible_fields %}
                {{ field.errors }}
                {{ field.help_text }}<br />
                {{ field }}<br />
                <div class="p-2"></div>
            {% endfor %}
                <br />
                <button class="btn btn-primary" type="submit" name="submit">
                    Upload Picture
                </button>
                <div class="p-5"></div>
        </form>
    </div>
  </div><!-- /add new photo for more images -->

  
  
  <div><!-- search bar -->
	<form
		class="form-inline"
		id="user-form"
		method ="post"
		action="{% url 'rate_my_walk:showWalk' walk.slug %}"
	>
		{% csrf_token %}
		
		<div class="form-group">
			<input
				type="text"
				size="50"
				name="query"
				id="query"
				value="{{last_query}}">
		
		</div>
		
		<button
			class="btn btn-primary"
			type="submit"
			name="submit"
		>
			Search
		</button>
			
	</form>
  </div><!-- /search bar -->

  <div><!-- search results -->
	{% if result_list %}
		<h2>Results</h2>
		
		<div class="list-group">
		
			{% for result in result_list %}
				<div class="list-group-item">
					<h3 class="list-group-item-heading">
						<a href="{{ result.link }}">
							{{ result.title|safe|escape }}
						</a>
					</h3>
					<p class="list-group-item-text">
						{{ result.summary|safe|escape }}
					</p>
				</div>
			{% endfor %}
		</div>
			
	{% endif %}
	
  </div><!-- /search results -->


</main><!-- /.container -->

<script>
      feather.replace()
</script>

{% endblock %}